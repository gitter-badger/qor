!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";function i(o,e){this.$element=t(o),this.options=t.extend({},i.DEFAULTS,t.isPlainObject(e)&&e),this.loading=!1,this.init()}var o="qor.publish",e="click."+o;i.prototype={constructor:i,init:function(){var i=this.options,o=this.$element;this.$modal=o.find(i.modal),t.fn.tooltip&&o.find(i.toggleCheck).tooltip(),this.bind()},bind:function(){this.$element.on(e,t.proxy(this.click,this))},unbind:function(){this.$element.off(e,this.click)},click:function(i){var o=this.options,e=t(i.target);if(e.is(o.toggleView)){if(i.preventDefault(),this.loading)return;this.loading=!0,this.$modal.find(".modal-body").empty().load(e.data("url"),t.proxy(this.show,this))}else e.is(o.toggleCheck)&&(e.prop("disabled")||e.closest("table").parent().find("tbody :checkbox").prop("checked",e.prop("checked")))},show:function(){this.loading=!1,this.$modal.modal("show")},destroy:function(){this.unbind(),this.$element.removeData(o)}},i.DEFAULTS={modal:".qor-publish-modal",toggleView:".qor-action-diff",toggleCheck:".qor-check-all"},i.plugin=function(e){return this.each(function(){var n,s=t(this),l=s.data(o);if(!l){if(!t.fn.modal)return;s.data(o,l=new i(this,e))}"string"==typeof e&&t.isFunction(n=l[e])&&n.apply(l)})},t(function(){i.plugin.call(t(".qor-publish"))})});