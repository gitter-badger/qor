{{$context := .}}

<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>{{t "Column"}}</th>
        <th>{{t "Live"}}</th>
        <th>{{t "Draft"}}</th>
      </tr>
    </thead>
    <tbody>
      {{$production := .Result.Production}}
      {{$draft := .Result.Draft}}
      {{$has_production := not (is_new_record $production)}}
      {{$res := .Result.Resource}}

      {{range $meta := show_metas .Result.Resource}}
        {{$draft_value := render_publish_meta $draft $meta $context}}
        {{$production_value := render_publish_meta $production $meta $context}}
        {{$diff := or (not $has_production) (not (equal $production_value $draft_value))}}

        <tr {{if $diff}}class="danger"{{end}}>
          <td>{{ rt $res $meta.Label }}</td>
          {{if $has_production}}
            <td>{{$production_value}}</td>
          {{else}}
            <td></td>
          {{end}}
          <td>{{$draft_value}}</td>
        </tr>
      {{end}}
    </tbody>
  </table>
</div>
